{"version":3,"sources":["Photo.js","App.js","index.js"],"names":["Photo","regular","urls","alt_description","likes","user","name","portfolio_url","medium","profile_image","className","src","alt","href","clientID","process","App","useState","loading","setLoading","photos","setPhotos","page","setPage","query","setQuery","newImages","setNewImages","mounted","useRef","fetchImages","a","urlPage","urlQuery","url","fetch","response","json","data","oldPhotos","results","console","log","event","window","innerHeight","scrollY","document","body","scrollHeight","useEffect","addEventListener","removeEventListener","current","oldPage","type","placeholder","value","onChange","e","target","onClick","preventDefault","map","image","key","id","ReactDOM","render","StrictMode","getElementById"],"mappings":"6PA4BeA,EA1BD,SAAC,GASR,IAREC,EAQH,EARLC,KAAQD,QACRE,EAOK,EAPLA,gBACAC,EAMK,EANLA,MAMK,IALLC,KACCC,EAII,EAJJA,KACAC,EAGI,EAHJA,cACiBC,EAEb,EAFJC,cAAiBD,OAGlB,OACC,6BAASE,UAAU,SAClB,yBAAKC,IAAKV,EAASW,IAAKT,IACxB,yBAAKO,UAAU,cACd,6BACC,4BAAKJ,GACL,2BAAIF,IAEL,uBAAGS,KAAMN,GACR,yBAAKI,IAAKH,EAAQI,IAAKN,EAAMI,UAAU,iBCjBtCI,EAAQ,qBAAiBC,+CAqHhBC,MAhHf,WAAgB,IAAD,EACgBC,oBAAS,GADzB,mBACPC,EADO,KACEC,EADF,OAEcF,mBAAS,IAFvB,mBAEPG,EAFO,KAECC,EAFD,OAGUJ,mBAAS,GAHnB,mBAGPK,EAHO,KAGDC,EAHC,OAIYN,mBAAS,IAJrB,mBAIPO,EAJO,KAIAC,EAJA,OAKoBR,oBAAS,GAL7B,mBAKPS,EALO,KAKIC,EALJ,KAMRC,EAAUC,kBAAO,GAEjBC,EAAW,uCAAG,oCAAAC,EAAA,6DACnBZ,GAAW,GAELa,EAHa,gBAGMV,GACnBW,EAJa,iBAIQT,GAG1BU,EADGV,EACA,UAjBS,2CAiBT,OAAkBV,GAAlB,OAA6BkB,GAA7B,OAAuCC,GAEvC,UApBO,oCAoBP,OAAgBnB,GAAhB,OAA2BkB,GATZ,kBAaKG,MAAMD,GAbX,cAaZE,EAbY,iBAcCA,EAASC,OAdV,QAcZC,EAdY,OAgBlBjB,GAAU,SAACkB,GACV,OAAIf,GAAkB,IAATF,EACLgB,EAAKE,QAEN,GAAN,mBAAWD,GADDf,EACV,YAAyBc,EAAKE,SAE9B,YAAyBF,OAG3BX,GAAa,GACbR,GAAW,GA1BO,kDA4BlBsB,QAAQC,IAAR,MACAvB,GAAW,GA7BO,0DAAH,qDAiCXwB,EAAQ,WAEZC,OAAOC,YAAcD,OAAOE,SAC5BC,SAASC,KAAKC,aAAe,GAE7BtB,GAAa,IAkCf,OA9BAuB,qBAAU,WAET,OADAN,OAAOO,iBAAiB,SAAUR,GAC3B,kBAAMC,OAAOQ,oBAAoB,SAAUT,MAChD,IAYHO,qBAAU,WACTpB,MAEE,CAACR,IAEJ4B,qBAAU,WACJtB,EAAQyB,QAIR3B,IACDR,GACJK,GAAQ,SAAC+B,GAAD,OAAaA,EAAU,MAL9B1B,EAAQyB,SAAU,IAMjB,CAAC3B,IAGH,8BACC,6BAAShB,UAAU,UAClB,0BAAMA,UAAU,eACf,2BACC6C,KAAK,OACLC,YAAY,SACZ9C,UAAU,aACV+C,MAAOjC,EACPkC,SAAU,SAACC,GAAD,OAAOlC,EAASkC,EAAEC,OAAOH,UAEpC,4BACCF,KAAK,SACL7C,UAAU,aACVmD,QAvCgB,SAACF,GACrBA,EAAEG,iBACGtC,IACQ,IAATF,EAIJC,EAAQ,GAHPO,OAqCG,kBAAC,IAAD,SAIH,6BAASpB,UAAU,UAClB,yBAAKA,UAAU,iBACbU,EAAO2C,KAAI,SAACC,GACZ,OAAO,kBAAC,EAAD,eAAOC,IAAKD,EAAME,IAAQF,QAGlC9C,GAAW,wBAAIR,UAAU,WAAd,iBC9GhByD,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFtB,SAASuB,eAAe,W","file":"static/js/main.5a4aa1c8.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Photo = ({\r\n\turls: { regular },\r\n\talt_description,\r\n\tlikes,\r\n\tuser: {\r\n\t\tname,\r\n\t\tportfolio_url,\r\n\t\tprofile_image: { medium },\r\n\t},\r\n}) => {\r\n\treturn (\r\n\t\t<article className=\"photo\">\r\n\t\t\t<img src={regular} alt={alt_description} />\r\n\t\t\t<div className=\"photo-info\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h4>{name}</h4>\r\n\t\t\t\t\t<p>{likes}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<a href={portfolio_url}>\r\n\t\t\t\t\t<img src={medium} alt={name} className=\"user-img\" />\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n};\r\n\r\nexport default Photo;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { FaSearch } from 'react-icons/fa';\r\nimport Photo from './Photo';\r\n\r\nconst clientID = `?client_id=${process.env.REACT_APP_ACCESS_KEY}`;\r\n\r\nconst mainUrl = `https://api.unsplash.com/photos/`;\r\nconst searchUrl = `https://api.unsplash.com/search/photos/`;\r\n\r\nfunction App() {\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [photos, setPhotos] = useState([]);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst [query, setQuery] = useState('');\r\n\tconst [newImages, setNewImages] = useState(false);\r\n\tconst mounted = useRef(false);\r\n\r\n\tconst fetchImages = async () => {\r\n\t\tsetLoading(true);\r\n\t\tlet url;\r\n\t\tconst urlPage = `&page=${page}`;\r\n\t\tconst urlQuery = `&query=${query}`;\r\n\r\n\t\tif (query) {\r\n\t\t\turl = `${searchUrl}${clientID}${urlPage}${urlQuery}`;\r\n\t\t} else {\r\n\t\t\turl = `${mainUrl}${clientID}${urlPage}`;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await fetch(url);\r\n\t\t\tconst data = await response.json();\r\n\r\n\t\t\tsetPhotos((oldPhotos) => {\r\n\t\t\t\tif (query && page === 1) {\r\n\t\t\t\t\treturn data.results;\r\n\t\t\t\t} else if (query) {\r\n\t\t\t\t\treturn [...oldPhotos, ...data.results];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn [...oldPhotos, ...data];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tsetNewImages(false);\r\n\t\t\tsetLoading(false);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tconst event = () => {\r\n\t\tif (\r\n\t\t\twindow.innerHeight + window.scrollY >=\r\n\t\t\tdocument.body.scrollHeight - 2\r\n\t\t) {\r\n\t\t\tsetNewImages(true);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\twindow.addEventListener('scroll', event);\r\n\t\treturn () => window.removeEventListener('scroll', event);\r\n\t}, []);\r\n\r\n\tconst handleSubmit = (e) => {\r\n\t\te.preventDefault();\r\n\t\tif (!query) return;\r\n\t\tif (page === 1) {\r\n\t\t\tfetchImages();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsetPage(1);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchImages();\r\n\t\t// eslint-disable-next-line\r\n\t}, [page]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!mounted.current) {\r\n\t\t\tmounted.current = true;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!newImages) return;\r\n\t\tif (loading) return;\r\n\t\tsetPage((oldPage) => oldPage + 1);\r\n\t}, [newImages]);\r\n\r\n\treturn (\r\n\t\t<main>\r\n\t\t\t<section className=\"search\">\r\n\t\t\t\t<form className=\"search-form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"search\"\r\n\t\t\t\t\t\tclassName=\"form-input\"\r\n\t\t\t\t\t\tvalue={query}\r\n\t\t\t\t\t\tonChange={(e) => setQuery(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"submit-btn\"\r\n\t\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<FaSearch />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</section>\r\n\t\t\t<section className=\"photos\">\r\n\t\t\t\t<div className=\"photos-center\">\r\n\t\t\t\t\t{photos.map((image) => {\r\n\t\t\t\t\t\treturn <Photo key={image.id} {...image} />;\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t\t{loading && <h2 className=\"loading\">loading...</h2>}\r\n\t\t\t</section>\r\n\t\t</main>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}